=form_for(@slide, :html => {:multipart => true}) do |f|
  .form-group
    =f.label(:title)
    =f.text_field(:title)
  .form-group
    =f.label(:content)
    =f.file_field(:content)
  .form-group
    p Parameters
    ul#parameters.parameters
      =f.fields_for(:parameters, @slide.parameters) do |f2|
        =render('parameter_fields', :f => f2)
    =link_to_add_fields('Add Parameter', f, :parameters)
  .form-group
    =f.label(:html_url)
    =f.text_field(:html_url)
  .form-group
    =f.label(:delay)
    small< in seconds
    =f.text_field(:delay)
  .form-group
    =f.label(:color)
    =f.text_field(:color, {:style=>"color:##{@slide.color}; background-color:##{@slide.color};"})
  .form-group
    =f.label(:publish_at)
    =f.text_field(:publish_at, :value => @slide.publish_at.try(:to_formatted_s, :long), :class => :date)
  .form-group
    =f.label(:unpublish_at)
    =f.text_field(:unpublish_at, :value => @slide.unpublish_at.try(:to_formatted_s, :long), :class => :date)
  .form-group
    =f.label(:department_id, 'Department')
    =f.collection_select(:department_id, Department.with_permissions_to(:show), :id, :title)
.slots
  h2 Slots
  table#slots.slots
    tr
      th.name Name
      th.remove Remove
    =f.fields_for(:slots, @slide.slots) do |f2|
      =render('slot_fields', :f => f2)
  =link_to_add_fields('Add Slot', f, :slots)

.schedule
  h2 Schedule
  table#schedules.schedules
    tr
      th.time Time
      th.action Action
      th.remove Remove
    =f.fields_for(:schedules, @slide.sorted_schedules) do |f2|
      =render('schedule_fields', :f => f2)
  =link_to_add_fields('Add Schedule', f, :schedules)
.buttons
  =f.submit('Save')
  =cancel_button
